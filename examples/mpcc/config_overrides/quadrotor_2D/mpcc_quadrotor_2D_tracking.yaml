# MPCC Algorithm Configuration for Quadrotor 2D Tracking
# 
# NOTE: This uses MPCC's BUILT-IN circle generator (mpcc_utils.create_circle)
# To use environment trajectory (env.X_GOAL), see mpcc_quadrotor_2D_tracking_env_circle.yaml

algo: mpcc

algo_config:
  # ═══════════════════════════════════════════════════════════
  # BUILT-IN TRACK CONFIGURATION (MPCC's own track generator)
  # ═══════════════════════════════════════════════════════════
  # use_env_trajectory: false  # Default: use built-in track_name
  track_name: 'circle'  # Options: 'simple_oval', 'figure_eight', 'circle'
                        # This uses mpcc_utils.create_circle(), NOT env.X_GOAL
  track_scale: 5.0  # Smaller for 2D quadrotor
  track_width: 0.5
  track_density: 100
  track_closed: true
  track_cache_dir: 'tracks'
  fixed_altitude: 1.0

  # MPC parameters
  horizon: 20

  # MPCC cost weights (tuned for quadrotor 2D)
  q_contour: 10.0   # High priority: stay on path
  q_lag: 100.0      # Very high: don't fall behind
  q_vel: [1.0, 1.0] # Moderate velocity penalty
  q_yaw: 0.5        # Keep facing forward
  q_yaw_rate: 0.1   # Smooth rotation
  q_v_theta: 0.1    # Moderate progress rate penalty

  # Control cost weights
  r_accel: [0.1, 0.1]
  r_yaw_rate: 0.1

  # Control limits
  accel_limits: [-3.0, 3.0]
  yaw_rate_limits: [-1.5, 1.5]
  v_theta_limits: [0.1, 2.0]

  # Solver options
  use_terminal_cost: true
  qp_solver: 'PARTIAL_CONDENSING_HPIPM'
  integrator_type: 'ERK'
  nlp_solver_type: 'SQP'
  nlp_solver_max_iter: 20
  qp_solver_iter_max: 50
  verbose: true

  # Prior info (compatibility with MPC structure)
  prior_info: null
  warmstart: false
